#!/bin/sh

# Simple LTE modem initialization backup script
# Calls the universal modem script if Huawei E3372h is detected

case "$1" in
    start)
        echo "Checking for LTE modem..."
        
        # Wait a bit for USB to settle
        sleep 5
        
        # Check if Huawei E3372h in CD-ROM mode is present
        if lsusb | grep -q "12d1:1f01"; then
            echo "Found Huawei E3372h, initializing..."
            /etc/wireless/modem e3372h-ssc30kq
        else
            echo "No Huawei E3372h found in CD-ROM mode"
        fi
        ;;
    stop)
        echo "LTE modem stop - no action needed"
        ;;
    restart)
        $0 stop
        sleep 2
        $0 start
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac

exit 0
